# P0-001: App.tsx分割

## 概要

680行のモノリシックなApp.tsxコンポーネントを責務ごとに分割し、保守性とテスタビリティを向上させる。

## 現状の問題点

- 単一ファイルに複数の責務が混在
- テストが困難（モックが複雑）
- 新機能追加時の影響範囲が不明確
- コードレビューが困難

## 実装計画

### Step 1: 責務の分析と分離設計

1. App.tsxの現在の責務を洗い出し

   - タブ管理ロジック
   - 状態同期処理
   - レイアウト定義
   - リクエスト実行管理

2. 新しいディレクトリ構造の作成

```
src/renderer/src/
├── containers/
│   ├── AppLayout.tsx
│   ├── TabManager.tsx
│   └── StateSync.tsx
└── hooks/
    ├── useTabState.ts
    └── useRequestExecution.ts
```

### Step 2: TabManager.tsxの実装

1. タブ関連のstate管理を抽出
2. タブ操作のハンドラーを移動
3. useTabStateフックの作成
4. 単体テストの実装

### Step 3: StateSync.tsxの実装

1. ストア間の同期ロジックを抽出
2. 副作用の管理を集約
3. 単体テストの実装

### Step 4: AppLayout.tsxの実装

1. レイアウト関連のJSXを抽出
2. スタイリングロジックの移動
3. レスポンシブ対応の集約

### Step 5: App.tsxのリファクタリング

1. 抽出したコンポーネントの統合
2. プロップスドリリングの最小化
3. エラーバウンダリの追加

### Step 6: 統合テストの実装

1. 既存の機能が保持されていることを確認
2. E2Eテストシナリオの追加

## 完了条件

- [ ] App.tsxが200行以下に削減
- [ ] 各分割コンポーネントに単体テストが存在
- [ ] 既存の全機能が正常に動作
- [ ] テストカバレッジが80%以上
- [ ] npm run all が全てパス

## 見積もり工数

3-5日（フルタイム換算）

## 依存関係

- なし（最優先タスク）

## リスクと対策

- **リスク**: 分割により状態管理が複雑化
  - **対策**: Context APIまたはZustandストアの適切な活用
- **リスク**: 既存機能の破壊
  - **対策**: 段階的な移行とテストの充実
